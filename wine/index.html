<meta name="viewport" content="width=device-width, initial-scale=1.0">
<html>
	<head>
		<script src="https://code.jquery.com/jquery-3.6.0.slim.min.js" integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/js/bootstrap.min.js" integrity="sha512-OvBgP9A2JBgiRad/mM36mkzXSXaJE9BEIENnVEmeZdITvwT09xnxLtT4twkCa8m/loMbPHsvPl0T8lRGVBwjlQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/css/bootstrap-reboot.min.css" integrity="sha512-stCMej6DXfErBwD8bQrJsG2dFPHNW9y8cmccQhW0o+GeSxKzjABmIVdwOzQ5Vlw4HYoEwrECGDRQs8xF0f9ssg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/css/bootstrap.min.css" integrity="sha512-GQGU0fMMi238uA+a/bdWJfpUGKUkBdgfFdgBm72SUQ6BeyWjoY/ton0tEjH+OSH9iP4Dfh+7HM0I9f5eR0L/4w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
		
	</head>
	<body class="mx-1 text-center">
		<span><h1>Wine Picker</h1><p class="font-weight-light">by Le Wine Bug</p></span>
		
			<div class="card p-2">
				<div class="form-group pt-5">
					<div class="btn-group btn-group-md" role="group" id="btn-group-meal-type">
						<input type="radio" class="btn-check" name="btnradio" id="btnradio1" autocomplete="off" value="main" checked>
						<label class="btn btn-outline-primary" for="btnradio1">Prato Principal</label>
					
						<input type="radio" class="btn-check" name="btnradio" id="btnradio2" autocomplete="off" value="tapas">
						<label class="btn btn-outline-primary" for="btnradio2">Entradas e Petiscos</label>
					
						<input type="radio" class="btn-check" name="btnradio" id="btnradio3" autocomplete="off" value="desert">
						<label class="btn btn-outline-primary" for="btnradio3">Sobremesa</label>
					</div>
				</div>
				
				<div class="form-group px-5 py-5">
					<select id="main_select" name="main_select" class="form-select">
						<option value="meat">Carnes vermelhas</option>
						<option value="bird">Aves</option>
						<option value="fish">Peixe</option>
						<option value="veg">Vegetariano</option>
						<option value="spicy">Picante</option>
					</select>
					<select id="tapas_select" name="tapas_select" class="form-select">
						<option value="seafood">Marisco</option>
						<option value="cheese">Queijo</option>
						<option value="delicatessen">Enchidos</option>
					</select>
					<select id="desert_select" name="desert_select" class="form-select">
						<option value="cake">Bolos</option>
						<option value="chocolate">Chocolate</option>n>
					</select>
				</div>

				<div class="form-group px-2">
					<div class="btn-group btn-group-md" role="group" id="btn-group-budget">
						<input type="radio" class="btn-check" name="budgetradio" id="budgetradio1" autocomplete="off" value="5" checked>
						<label class="btn btn-outline-primary" for="budgetradio1">Até 5€</label>
					
						<input type="radio" class="btn-check" name="budgetradio" id="budgetradio2" autocomplete="off" value="10">
						<label class="btn btn-outline-primary" for="budgetradio2">Até 10€</label>
					
						<input type="radio" class="btn-check" name="budgetradio" id="budgetradio3" autocomplete="off" value="20">
						<label class="btn btn-outline-primary" for="budgetradio3">Até 20€</label>

						<input type="radio" class="btn-check" name="budgetradio" id="budgetradio4" autocomplete="off" value="21">
						<label class="btn btn-outline-primary" for="budgetradio4">Mais de 20€</label>
					</div>
				</div>

					
				<div class="form-group py-5">
					<div class="text-center">
						<button id="submit" class="btn btn-lg btn-success">Recomendar</button>
					</div>
				</div>
				
				<div class="form-group px-2" id="suggestion">
				</div>
				
				<div class="form-group px-2" id="no_suggestion">
					<h5>Sem sugestões</h5>
				</div>	

			</div>
		
	</body>
	<script>
		var wines = [
			{name: 'Papa Figos', type: ['meat', 'fish', 'cheese'], min: 5, max: 9, url: 'https://www.continente.pt/dw/image/v2/BDVS_PRD/on/demandware.static/-/Sites-col-master-catalog/default/dw6e969c6d/images/col/495/4952282-frente.jpg?sw=2000&sh=2000'},
			{name: 'Aveleda', type: ['fish', 'seafood'], min: 3, max: 5, url: 'https://www.vinha.pt/wp-content/uploads/2015/05/100582.jpg'},
			{name: 'Casal Garcia', type: ['seafood', 'bird', 'veg'], min: 3, max: 6, url:'https://www.continente.pt/dw/image/v2/BDVS_PRD/on/demandware.static/-/Sites-col-master-catalog/default/dw6679d1d8/images/col/205/2050292-frente.jpg?sw=2000&sh=2000'},
			{name: 'Porto Ferreira Ruby', type: ['cake', 'chocolate'], min: 5, max: 10, url: 'https://www.continente.pt/dw/image/v2/BDVS_PRD/on/demandware.static/-/Sites-col-master-catalog/default/dw62206f3c/images/col/205/2050381-frente-caixa.jpg?sw=2000&sh=2000'},
		];

		$(function() {
			$('#tapas_select').hide();
			$('#desert_select').hide();
			$('#suggestion').hide();
			$('#no_suggestion').hide();
			$('#more_suggestions').hide();
		});

		$('#btn-group-meal-type').on("change", function() {
			var type = $('input[name="btnradio"]:checked').val();
			$('#main_select').hide();
			$('#tapas_select').hide();
			$('#desert_select').hide();
			switch(type) {
				case 'main':
					$('#main_select').show();
					break;
				case 'tapas':
					$('#tapas_select').show();
					break;	
				case 'desert':
					$('#desert_select').show();
					break;		
			}
		});

		$('#submit').on("click", function() {
			var type = $('input[name="btnradio"]:checked').val();
			var subtype = null;
			switch(type) {
				case 'main':
					subtype = $('#main_select option:selected').val();
					break;
				case 'tapas':
					subtype = $('#tapas_select option:selected').val();
					break;	
				case 'desert':
					subtype = $('#desert_select option:selected').val();
					break;		
			}
			var budget = $('input[name="budgetradio"]:checked').val();

			console.log(type, subtype, budget);

			const suggested = wines.filter(function(w) {
  			return (w.max <= budget && w.type.includes(subtype));
			});

			if(suggested.length == 0) {
				$('#no_suggestion').show();
				$('#suggestion').hide();
				$('#more_suggestions').hide();
			}
			else{
				$('#no_suggestion').hide();
				$('#suggestion').empty();
				suggested.forEach(function(suggestion){
					$('#suggestion').append(`
						<div class="form-group px-2">
						<img style="max-height: 10rem;width: 100%; height: 100%; object-fit: contain;" id="image" src='` + suggestion.url+ `''>
						<h5>` + suggestion.name + `</h5>
						<p>Entre ` + suggestion.min + `€ e ` + suggestion.max + `€. </p>
						<p>Comprar aqui! (brevemente)</p>
						</div>`)
				});
				$('#suggestion').show();
				}



		});


	</script>
</html>
